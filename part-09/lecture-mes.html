<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Tobias Cors">

<title>Lecture IX - Multi-Energy Systems – Energy System Optimization with Julia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a6ef90cfdb74e828c1a9db3872de2949.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script defer="" data-domain="TobiasCors.github.io/energy-system-optimization" src="https://plausible.io/js/script.file-downloads.outbound-links.js"></script>
<script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>
</head><body class="nav-sidebar floating quarto-light">\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>





<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part-09/lecture-mes.html">09 MES</a></li><li class="breadcrumb-item"><a href="../part-09/lecture-mes.html">Lecture</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="https://images.unsplash.com/photo-1617228679684-890412dc57a5?q=80&amp;w=3270&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../general/syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
 <span class="menu-text">***</span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-01/lecture-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01 Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">02 First Steps</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-02/lecture-firststeps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-02/tutorial-02-01-variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01 - Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-02/tutorial-02-02-vectors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02 - Vectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-02/tutorial-02-03-comparisons.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03 - Comparisons</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-02/tutorial-02-04-loops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04 - Loops</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-02/tutorial-02-05-dicts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05 - Dictionaries</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">03 Data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-03/lecture-packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-03/tutorial-03-01-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01 - Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-03/tutorial-03-02-handling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02 - Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-03/tutorial-03-03-DataFrames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03 - DataFrames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-03/tutorial-03-04-IO.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04 - Input and Output</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-03/tutorial-03-05-Plotting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05 - Plotting</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">04 Optimization</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-04/lecture-jump.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-04/tutorial-04-01-jump.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01 - JuMP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-04/tutorial-04-02-bounds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02 - Bounds</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-04/tutorial-04-03-constraints.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03 - Constraints</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-04/tutorial-04-04-advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04 - Advanced</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-04/tutorial-04-05-transport.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05 - Transport</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">05 Dispatch</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-05/lecture-dispatch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-05/tutorial-dispatch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">06 Commitment</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-06/lecture-commitment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-06/tutorial-commitment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">07 Storage</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-07/lecture-storage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-07/tutorial-storage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false">
 <span class="menu-text">08 Design</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-08/lecture-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-08/tutorial-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">09 MES</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-09/lecture-mes.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Lecture</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
 <span class="menu-text">***</span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false">
 <span class="menu-text">Cheatsheets</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../general/cheatsheet-julia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Julia</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../general/cheatsheet-jump.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JuMP</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../general/faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FAQs</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../general/literature.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literature</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#quick-recap-from-last-week" id="toc-quick-recap-from-last-week" class="nav-link active" data-scroll-target="#quick-recap-from-last-week"><span class="flow">Quick Recap from last Week</span></a>
  <ul class="collapse">
  <li><a href="#energy-system-design-problem-overview" id="toc-energy-system-design-problem-overview" class="nav-link" data-scroll-target="#energy-system-design-problem-overview">Energy System Design Problem Overview</a></li>
  <li><a href="#mathematical-formulation" id="toc-mathematical-formulation" class="nav-link" data-scroll-target="#mathematical-formulation">Mathematical Formulation</a>
  <ul class="collapse">
  <li><a href="#objective-function" id="toc-objective-function" class="nav-link" data-scroll-target="#objective-function">Objective Function</a></li>
  <li><a href="#key-constraints" id="toc-key-constraints" class="nav-link" data-scroll-target="#key-constraints">Key Constraints</a></li>
  </ul></li>
  <li><a href="#model-characteristics" id="toc-model-characteristics" class="nav-link" data-scroll-target="#model-characteristics">Model Characteristics</a></li>
  <li><a href="#additional-constraints" id="toc-additional-constraints" class="nav-link" data-scroll-target="#additional-constraints">Additional Constraints</a>
  <ul class="collapse">
  <li><a href="#generator-constraints" id="toc-generator-constraints" class="nav-link" data-scroll-target="#generator-constraints">Generator Constraints</a></li>
  <li><a href="#storage-constraints" id="toc-storage-constraints" class="nav-link" data-scroll-target="#storage-constraints">Storage Constraints</a></li>
  <li><a href="#grid-connection" id="toc-grid-connection" class="nav-link" data-scroll-target="#grid-connection">Grid Connection</a></li>
  <li><a href="#renewable-generation" id="toc-renewable-generation" class="nav-link" data-scroll-target="#renewable-generation">Renewable Generation</a></li>
  <li><a href="#system-wide-constraints" id="toc-system-wide-constraints" class="nav-link" data-scroll-target="#system-wide-constraints">System-wide Constraints</a></li>
  </ul></li>
  <li><a href="#implementation-insights" id="toc-implementation-insights" class="nav-link" data-scroll-target="#implementation-insights">Implementation Insights</a></li>
  <li><a href="#solutions-from-last-week" id="toc-solutions-from-last-week" class="nav-link" data-scroll-target="#solutions-from-last-week">Solutions from last Week</a></li>
  </ul></li>
  <li><a href="#excursion-two-stage-stochastic-programming" id="toc-excursion-two-stage-stochastic-programming" class="nav-link" data-scroll-target="#excursion-two-stage-stochastic-programming"><span class="flow">Excursion: Two-Stage Stochastic Programming</span></a>
  <ul class="collapse">
  <li><a href="#problem-structure-vs.-solution-method" id="toc-problem-structure-vs.-solution-method" class="nav-link" data-scroll-target="#problem-structure-vs.-solution-method">Problem Structure vs.&nbsp;Solution Method</a></li>
  <li><a href="#solution-approaches" id="toc-solution-approaches" class="nav-link" data-scroll-target="#solution-approaches">Solution Approaches</a>
  <ul class="collapse">
  <li><a href="#monolithic-approach" id="toc-monolithic-approach" class="nav-link" data-scroll-target="#monolithic-approach">Monolithic Approach</a></li>
  <li><a href="#decomposition-methods" id="toc-decomposition-methods" class="nav-link" data-scroll-target="#decomposition-methods">Decomposition Methods</a></li>
  </ul></li>
  <li><a href="#energy-system-design-example" id="toc-energy-system-design-example" class="nav-link" data-scroll-target="#energy-system-design-example">Energy System Design Example</a>
  <ul class="collapse">
  <li><a href="#first-stage-investment" id="toc-first-stage-investment" class="nav-link" data-scroll-target="#first-stage-investment">First Stage (Investment)</a></li>
  <li><a href="#second-stage-operation" id="toc-second-stage-operation" class="nav-link" data-scroll-target="#second-stage-operation">Second Stage (Operation)</a></li>
  </ul></li>
  <li><a href="#mathematical-representation" id="toc-mathematical-representation" class="nav-link" data-scroll-target="#mathematical-representation">Mathematical Representation</a></li>
  </ul></li>
  <li><a href="#introduction-to-multi-energy-systems" id="toc-introduction-to-multi-energy-systems" class="nav-link" data-scroll-target="#introduction-to-multi-energy-systems"><span class="flow">Introduction to Multi-Energy Systems</span></a>
  <ul class="collapse">
  <li><a href="#multi-energy-systems-definition" id="toc-multi-energy-systems-definition" class="nav-link" data-scroll-target="#multi-energy-systems-definition">Multi-Energy Systems: Definition</a></li>
  <li><a href="#multi-energy-systems-example-hydrogen-value-chain" id="toc-multi-energy-systems-example-hydrogen-value-chain" class="nav-link" data-scroll-target="#multi-energy-systems-example-hydrogen-value-chain">Multi-Energy Systems: Example Hydrogen Value Chain</a></li>
  <li><a href="#multi-energy-system-design-problem" id="toc-multi-energy-system-design-problem" class="nav-link" data-scroll-target="#multi-energy-system-design-problem">Multi-Energy System Design Problem</a></li>
  <li><a href="#key-components" id="toc-key-components" class="nav-link" data-scroll-target="#key-components">Key Components</a></li>
  </ul></li>
  <li><a href="#mathematical-formulation-of-the-stochastic-design-problem-for-multi-energy-systems" id="toc-mathematical-formulation-of-the-stochastic-design-problem-for-multi-energy-systems" class="nav-link" data-scroll-target="#mathematical-formulation-of-the-stochastic-design-problem-for-multi-energy-systems"><span class="flow">Mathematical Formulation of the Stochastic Design Problem for Multi-Energy Systems</span></a>
  <ul class="collapse">
  <li><a href="#sets" id="toc-sets" class="nav-link" data-scroll-target="#sets">Sets</a></li>
  <li><a href="#decision-variables" id="toc-decision-variables" class="nav-link" data-scroll-target="#decision-variables">Decision Variables</a>
  <ul class="collapse">
  <li><a href="#investment-variables-first-stage" id="toc-investment-variables-first-stage" class="nav-link" data-scroll-target="#investment-variables-first-stage">Investment Variables (First Stage)</a></li>
  <li><a href="#operational-variables-second-stage" id="toc-operational-variables-second-stage" class="nav-link" data-scroll-target="#operational-variables-second-stage">Operational Variables (Second Stage)</a></li>
  <li><a href="#annual-cost-variables" id="toc-annual-cost-variables" class="nav-link" data-scroll-target="#annual-cost-variables">Annual Cost Variables</a></li>
  </ul></li>
  <li><a href="#parameters" id="toc-parameters" class="nav-link" data-scroll-target="#parameters">Parameters</a>
  <ul class="collapse">
  <li><a href="#investment-costs-first-stage" id="toc-investment-costs-first-stage" class="nav-link" data-scroll-target="#investment-costs-first-stage">Investment Costs (First Stage)</a></li>
  <li><a href="#operational-parameters-second-stage" id="toc-operational-parameters-second-stage" class="nav-link" data-scroll-target="#operational-parameters-second-stage">Operational Parameters (Second Stage)</a></li>
  </ul></li>
  <li><a href="#objective-function-1" id="toc-objective-function-1" class="nav-link" data-scroll-target="#objective-function-1">Objective Function</a></li>
  <li><a href="#annual-cost-constraints" id="toc-annual-cost-constraints" class="nav-link" data-scroll-target="#annual-cost-constraints">Annual Cost Constraints</a>
  <ul class="collapse">
  <li><a href="#investment-costs-first-stage-1" id="toc-investment-costs-first-stage-1" class="nav-link" data-scroll-target="#investment-costs-first-stage-1">Investment Costs (First Stage)</a></li>
  <li><a href="#investment-budget" id="toc-investment-budget" class="nav-link" data-scroll-target="#investment-budget">Investment Budget</a></li>
  <li><a href="#grid-electricity-costs-second-stage" id="toc-grid-electricity-costs-second-stage" class="nav-link" data-scroll-target="#grid-electricity-costs-second-stage">Grid Electricity Costs (Second Stage)</a></li>
  </ul></li>
  <li><a href="#constraints" id="toc-constraints" class="nav-link" data-scroll-target="#constraints">Constraints</a>
  <ul class="collapse">
  <li><a href="#power-balance-electricity" id="toc-power-balance-electricity" class="nav-link" data-scroll-target="#power-balance-electricity">Power Balance (Electricity)</a></li>
  <li><a href="#hydrogen-balance" id="toc-hydrogen-balance" class="nav-link" data-scroll-target="#hydrogen-balance">Hydrogen Balance</a></li>
  <li><a href="#component-limits" id="toc-component-limits" class="nav-link" data-scroll-target="#component-limits">Component Limits</a></li>
  <li><a href="#storage-energy-balance" id="toc-storage-energy-balance" class="nav-link" data-scroll-target="#storage-energy-balance">Storage Energy Balance</a></li>
  <li><a href="#electrolyzer-constraints" id="toc-electrolyzer-constraints" class="nav-link" data-scroll-target="#electrolyzer-constraints">Electrolyzer Constraints</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#literature" id="toc-literature" class="nav-link" data-scroll-target="#literature"><span class="flow">Literature</span></a>
  <ul class="collapse">
  <li><a href="#literature-i" id="toc-literature-i" class="nav-link" data-scroll-target="#literature-i">Literature I</a></li>
  <li><a href="#literature-ii" id="toc-literature-ii" class="nav-link" data-scroll-target="#literature-ii">Literature II</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/TobiasCors/Energy-System-Optimization/edit/main/part-09/lecture-mes.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/TobiasCors/Energy-System-Optimization/blob/main/part-09/lecture-mes.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/TobiasCors/Energy-System-Optimization/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="lecture-presentation.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part-09/lecture-mes.html">09 MES</a></li><li class="breadcrumb-item"><a href="../part-09/lecture-mes.html">Lecture</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Lecture IX - Multi-Energy Systems</h1>
<p class="subtitle lead">Energy System Optimization with Julia</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Dr.&nbsp;Tobias Cors </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Hamburg University of Applied Science - Summer 2025
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="quick-recap-from-last-week" class="level1 title">
<h1 class="title"><span class="flow">Quick Recap from last Week</span></h1>
<section id="energy-system-design-problem-overview" class="level2">
<h2 class="anchored" data-anchor-id="energy-system-design-problem-overview">Energy System Design Problem Overview</h2>
<ul>
<li><p><strong>Objective</strong>: Minimize total annual costs (investment + operational) while respecting budget constraints</p></li>
<li><p><strong>Decision Variables</strong>:</p>
<ul>
<li>Investment variables (First Stage):
<ul>
<li>Storage energy capacity (<span class="math inline">\(e^{nom}_s\)</span>)</li>
<li>Storage charging power (<span class="math inline">\(p^{ch,nom}_s\)</span>)</li>
<li>Storage discharging power (<span class="math inline">\(p^{dis,nom}_s\)</span>)</li>
<li>Wind park capacity (<span class="math inline">\(p^{nom}_w\)</span>)</li>
<li>PV park capacity (<span class="math inline">\(p^{nom}_v\)</span>)</li>
</ul></li>
<li>Operational variables (Second Stage):
<ul>
<li>Wind power output (<span class="math inline">\(p_{w,t,\omega}\)</span>)</li>
<li>PV power output (<span class="math inline">\(p_{v,t,\omega}\)</span>)</li>
<li>Grid import/export (<span class="math inline">\(p^{in}_{t,\omega}\)</span>, <span class="math inline">\(p^{out}_{t,\omega}\)</span>)</li>
<li>Storage operation (<span class="math inline">\(p^{ch}_{s,t,\omega}\)</span>, <span class="math inline">\(p^{dis}_{s,t,\omega}\)</span>, <span class="math inline">\(e_{s,t,\omega}\)</span>)</li>
</ul></li>
</ul></li>
<li><p><strong>Key Constraints</strong>:</p>
<ul>
<li>Investment budget limit</li>
<li>Power balance</li>
<li>Component capacity limits</li>
<li>Storage energy balance</li>
<li>Storage energy limits</li>
<li>Storage power limits</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The Energy System Design problem combines investment planning (sizing) with operational optimization, enabling comprehensive energy system design. The stochastic formulation considers multiple scenarios to account for uncertainty in renewable generation, demand patterns, and price variations.</p>
</div>
</div>
</section>
<section id="mathematical-formulation" class="level2">
<h2 class="anchored" data-anchor-id="mathematical-formulation">Mathematical Formulation</h2>
<section id="objective-function" class="level3">
<h3 class="anchored" data-anchor-id="objective-function">Objective Function</h3>
<p><span class="math inline">\(\text{Minimize} \quad \sum_{s \in \mathcal{S}} AC^{inv}_s + \sum_{w \in \mathcal{W}} AC^{inv}_w + \sum_{v \in \mathcal{V}} AC^{inv}_v + \sum_{\omega \in \Omega} \pi_{\omega} (AC^{grid,imp}_{\omega} - AR^{grid,exp}_{\omega})\)</span></p>
</section>
<section id="key-constraints" class="level3">
<h3 class="anchored" data-anchor-id="key-constraints">Key Constraints</h3>
<ol type="1">
<li><strong>Investment Budget</strong>:</li>
</ol>
<p><span class="math inline">\(\sum_{s \in \mathcal{S}} (C^{E}_s e^{nom}_s + C^{P,ch}_s p^{ch,nom}_s + C^{P,dis}_s p^{dis,nom}_s) + \sum_{w \in \mathcal{W}} C^{W}_w p^{nom}_w + \sum_{v \in \mathcal{V}} C^{PV}_v p^{nom}_v \leq B^{max}\)</span></p>
<ol start="2" type="1">
<li><strong>Power Balance</strong>:</li>
</ol>
<p><span class="math inline">\(\sum_{w \in \mathcal{W}} p_{w,t,\omega} + \sum_{v \in \mathcal{V}} p_{v,t,\omega} + (p^{in}_{t,\omega} - p^{out}_{t,\omega}) + \sum_{s \in \mathcal{S}} (p^{dis}_{s,t,\omega} - p^{ch}_{s,t,\omega}) = d_{t,\omega} \quad \forall t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<ol start="3" type="1">
<li><strong>Component Capacity Limits</strong>:</li>
</ol>
<p><span class="math inline">\(0 \leq p_{w,t,\omega} \leq f_{w,t,\omega} p^{nom}_w \quad \forall w \in \mathcal{W}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(0 \leq p_{v,t,\omega} \leq f_{v,t,\omega} p^{nom}_v \quad \forall v \in \mathcal{V}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(0 \leq p^{ch}_{s,t,\omega} \leq p^{ch,nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(0 \leq p^{dis}_{s,t,\omega} \leq p^{dis,nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(DoD_s e^{nom}_s \leq e_{s,t,\omega} \leq e^{nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<ol start="4" type="1">
<li><strong>Storage Energy Balance</strong>:</li>
</ol>
<p><span class="math inline">\(e_{s,t,\omega} = (1-sdr_s)e_{s,t-1,\omega} + \eta^{ch}_s p^{ch}_{s,t,\omega} - \frac{p^{dis}_{s,t,\omega}}{\eta^{dis}_s} \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
</section>
</section>
<section id="model-characteristics" class="level2">
<h2 class="anchored" data-anchor-id="model-characteristics">Model Characteristics</h2>
<ul>
<li>Two-stage stochastic Linear Programming (LP) problem</li>
<li>Combines investment and operational decisions</li>
<li>Large-scale optimization problem</li>
<li>Requires efficient solution methods</li>
<li>Considers multiple scenarios for robust decision-making</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The model can be adapted to specific use cases, i.e., if a wind park already has a fixed capacity, the corresponding variable can be converted to a parameter. The stochastic formulation allows for more robust investment decisions by considering multiple scenarios.</p>
</div>
</div>
</section>
<section id="additional-constraints" class="level2">
<h2 class="anchored" data-anchor-id="additional-constraints">Additional Constraints</h2>
<p>The basic model can be extended with various constraints, partly covered from previous lectures:</p>
<section id="generator-constraints" class="level3">
<h3 class="anchored" data-anchor-id="generator-constraints">Generator Constraints</h3>
<ul>
<li>Minimum up/down times</li>
<li>Start-up and shut-down costs</li>
<li>Ramp rate limits</li>
<li>Minimum load constraints</li>
<li>Part-load efficiency curves</li>
</ul>
</section>
<section id="storage-constraints" class="level3">
<h3 class="anchored" data-anchor-id="storage-constraints">Storage Constraints</h3>
<ul>
<li>Ramp rate limits for charging/discharging</li>
<li>Mutual exclusion constraints</li>
<li>Cycle limits (daily/weekly/seasonal)</li>
<li>State of charge dependent efficiency</li>
<li>Temperature dependent operation</li>
<li>Degradation effects</li>
<li>Multiple storage technologies with different characteristics</li>
</ul>
</section>
<section id="grid-connection" class="level3">
<h3 class="anchored" data-anchor-id="grid-connection">Grid Connection</h3>
<ul>
<li>Maximum import/export power limits</li>
<li>Grid fees and tariffs</li>
<li>Ancillary service requirements</li>
</ul>
</section>
<section id="renewable-generation" class="level3">
<h3 class="anchored" data-anchor-id="renewable-generation">Renewable Generation</h3>
<ul>
<li>Curtailment limits</li>
</ul>
</section>
<section id="system-wide-constraints" class="level3">
<h3 class="anchored" data-anchor-id="system-wide-constraints">System-wide Constraints</h3>
<ul>
<li>Reserve requirements</li>
<li>Island operation capability</li>
<li>Multiple energy carriers</li>
<li>Environmental constraints</li>
<li>Regulatory requirements</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>These additional constraints can be included based on the specific requirements of the energy system being designed. Each constraint adds complexity but may be necessary for realistic modeling.</p>
</div>
</div>
</section>
</section>
<section id="implementation-insights" class="level2">
<h2 class="anchored" data-anchor-id="implementation-insights">Implementation Insights</h2>
<ul>
<li>Data structures use NamedTuples for efficient parameter storage</li>
<li>Results are stored in DataFrames for easy analysis</li>
<li>Key metrics tracked:
<ul>
<li>Total system cost</li>
<li>Investment costs by component</li>
<li>Operational costs</li>
<li>Component capacities</li>
<li>Storage operation</li>
<li>Grid interaction</li>
</ul></li>
<li>Sensitivity analysis capabilities:
<ul>
<li>Budget variations</li>
<li>Electricity price changes</li>
<li>Component cost variations</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The tutorial demonstrated how to implement and solve the stochastic design problem using Julia and JuMP, including comprehensive sensitivity analysis of key parameters such as investment budget and electricity prices.</p>
</div>
</div>
</section>
<section id="solutions-from-last-week" class="level2">
<h2 class="anchored" data-anchor-id="solutions-from-last-week">Solutions from last Week</h2>
<ul>
<li>The tutorials from last week will again be <span class="highlight">available on Friday</span></li>
<li>You can access them in the project folder on Github</li>
<li>Click on the little cat icon on the bottom right</li>
</ul>
<p>. . .</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="highlight">You can ask questions anytime in class or via email!</span></p>
</div>
</div>
</section>
</section>
<section id="excursion-two-stage-stochastic-programming" class="level1 title">
<h1 class="title"><span class="flow">Excursion: Two-Stage Stochastic Programming</span></h1>
<section id="problem-structure-vs.-solution-method" class="level2">
<h2 class="anchored" data-anchor-id="problem-structure-vs.-solution-method">Problem Structure vs.&nbsp;Solution Method</h2>
<p>A two-stage stochastic programming problem is characterized by its decision structure, not its solution method. The key aspects are:</p>
<ol type="1">
<li><strong>Decision Stages</strong>:
<ul>
<li>First stage (here-and-now): Decisions made before uncertainty is revealed</li>
<li>Second stage (wait-and-see): Decisions made after uncertainty is revealed</li>
</ul></li>
<li><strong>Information Structure</strong>:
<ul>
<li>First stage: Decisions based on known parameters and probability distributions</li>
<li>Second stage: Decisions based on observed scenario realizations</li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The “two-stage” classification refers to the logical structure and timing of decisions, not how the problem is solved computationally.</p>
</div>
</div>
</section>
<section id="solution-approaches" class="level2">
<h2 class="anchored" data-anchor-id="solution-approaches">Solution Approaches</h2>
<section id="monolithic-approach" class="level3">
<h3 class="anchored" data-anchor-id="monolithic-approach">Monolithic Approach</h3>
<ul>
<li>Solve the entire problem as one large optimization model</li>
<li>All constraints and variables are included in a single mathematical program</li>
<li>Advantages:
<ul>
<li>Simpler implementation</li>
<li>Direct solution using standard solvers</li>
<li>No need for specialized algorithms</li>
</ul></li>
<li>Disadvantages:
<ul>
<li>Can become computationally challenging for large problems</li>
<li>May require significant memory resources</li>
</ul></li>
</ul>
</section>
<section id="decomposition-methods" class="level3">
<h3 class="anchored" data-anchor-id="decomposition-methods">Decomposition Methods</h3>
<ul>
<li>Break the problem into smaller subproblems</li>
<li>Examples:
<ul>
<li>Benders decomposition: Iteratively solves a master problem (first stage) and subproblems (second stage) by adding cuts that approximate the second-stage cost</li>
<li>Progressive hedging: Solves each scenario independently and iteratively adjusts solutions to achieve consensus across scenarios</li>
<li>L-shaped method: Similar to Benders, but specifically designed for two-stage stochastic linear programs with a special structure</li>
</ul></li>
<li>Advantages:
<ul>
<li>Can handle larger problems</li>
<li>More efficient for certain problem structures</li>
</ul></li>
<li>Disadvantages:
<ul>
<li>More complex implementation</li>
<li>May require specialized algorithms</li>
</ul></li>
</ul>
</section>
</section>
<section id="energy-system-design-example" class="level2">
<h2 class="anchored" data-anchor-id="energy-system-design-example">Energy System Design Example</h2>
<p>In our energy system design problem:</p>
<section id="first-stage-investment" class="level3">
<h3 class="anchored" data-anchor-id="first-stage-investment">First Stage (Investment)</h3>
<ul>
<li>Storage capacity decisions</li>
<li>Wind park capacity</li>
<li>PV park capacity</li>
<li>Made before knowing:
<ul>
<li>Renewable generation profiles</li>
<li>Demand patterns</li>
<li>Electricity prices</li>
</ul></li>
</ul>
</section>
<section id="second-stage-operation" class="level3">
<h3 class="anchored" data-anchor-id="second-stage-operation">Second Stage (Operation)</h3>
<ul>
<li>Power dispatch decisions</li>
<li>Storage operation</li>
<li>Grid interaction</li>
<li>Made after observing:
<ul>
<li>Actual renewable generation</li>
<li>Real demand</li>
<li>Current market prices</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Whether we solve this as one large optimization problem or use decomposition methods, it remains a two-stage stochastic program due to its decision structure and information flow.</p>
</div>
</div>
</section>
</section>
<section id="mathematical-representation" class="level2">
<h2 class="anchored" data-anchor-id="mathematical-representation">Mathematical Representation</h2>
<p>The general form of a two-stage stochastic program is:</p>
<p><span class="math inline">\(\min_{x} \quad c^T x + \mathbb{E}_{\omega}[Q(x,\omega)]\)</span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\(x\)</span> represents first-stage decisions</li>
<li><span class="math inline">\(Q(x,\omega)\)</span> represents the second-stage problem for scenario <span class="math inline">\(\omega\)</span></li>
<li><span class="math inline">\(\mathbb{E}_{\omega}\)</span> denotes the expectation over all scenarios</li>
</ul>
<p>This structure can be solved:</p>
<ol type="1">
<li>As one large optimization problem (monolithic)</li>
<li>Using decomposition methods</li>
<li>Through other specialized algorithms</li>
</ol>
<p>The choice of solution method depends on:</p>
<ul>
<li>Problem size</li>
<li>Available computational resources</li>
<li>Required solution time</li>
<li>Implementation complexity</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The two-stage structure provides a framework for modeling decision-making under uncertainty, regardless of the computational approach used to solve it.</p>
</div>
</div>
</section>
</section>
<section id="introduction-to-multi-energy-systems" class="level1 title">
<h1 class="title"><span class="flow">Introduction to Multi-Energy Systems</span></h1>
<section id="multi-energy-systems-definition" class="level2">
<h2 class="anchored" data-anchor-id="multi-energy-systems-definition">Multi-Energy Systems: Definition</h2>
<p>A multi-energy system is a system that combines multiple energy carriers (e.g.&nbsp;electricity, hydrogen, heat, etc.) to meet the energy demand of a specific application.</p>
</section>
<section id="multi-energy-systems-example-hydrogen-value-chain" class="level2">
<h2 class="anchored" data-anchor-id="multi-energy-systems-example-hydrogen-value-chain">Multi-Energy Systems: Example Hydrogen Value Chain</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="H2-mes.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>Example case of a hydrogen value chain</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The figure shows a multi-energy system with:</p>
<ul>
<li>Renewable energy sources (PV and Wind) and grid connection</li>
<li>Electric bus bar for power distribution</li>
<li>Electrolyzer for hydrogen production</li>
<li>Hydrogen bus bar for hydrogen distribution</li>
<li>Hydrogen storage</li>
<li>Hydrogen demand</li>
</ul>
</div>
</div>
</section>
<section id="multi-energy-system-design-problem" class="level2">
<h2 class="anchored" data-anchor-id="multi-energy-system-design-problem">Multi-Energy System Design Problem</h2>
<p>In this lecture, we extend the Stochastic System Design problem to include investment decisions for <em>multi-energy systems</em>. This allows us to:</p>
<ol type="1">
<li>Optimize technology selection over the entire energy value chain</li>
<li>Determine optimal component sizes</li>
<li>Balance investment and operational costs</li>
<li>Plan local multi-energy systems holistically (e.g.&nbsp;electricity, hydrogen, heat, etc.)</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember: The design problem combines investment planning (sizing) with operational optimization, enabling comprehensive (multi-)energy system design.</p>
</div>
</div>
</section>
<section id="key-components" class="level2">
<h2 class="anchored" data-anchor-id="key-components">Key Components</h2>
<p>We will focus on optimizing:</p>
<ul>
<li>Storage systems for electricity and hydrogen</li>
<li>Wind parks</li>
<li>PV parks</li>
<li>Electrolyzers</li>
<li>Electric market participation</li>
</ul>
<p>… while fullfilling a fixed hydrogen demand. Additionally, we consider a maximum investment budget.</p>
<p>All nominal sizes will be decision variables in our optimization model.</p>
</section>
</section>
<section id="mathematical-formulation-of-the-stochastic-design-problem-for-multi-energy-systems" class="level1 title">
<h1 class="title"><span class="flow">Mathematical Formulation of the Stochastic Design Problem for Multi-Energy Systems</span></h1>
<p><strong>… on the simple example of the hydrogen value chain with electricity and hydrogen as mediums</strong></p>
<section id="sets" class="level2">
<h2 class="anchored" data-anchor-id="sets">Sets</h2>
<ul>
<li><span class="math inline">\(\mathcal{T}\)</span> - Set of time periods indexed by <span class="math inline">\(t \in \{1,2,...,|\mathcal{T}|\}\)</span></li>
<li><span class="math inline">\(\mathcal{S}\)</span> - Set of storage systems indexed by <span class="math inline">\(s \in \{1,2,...,|\mathcal{S}|\}\)</span></li>
<li><span class="math inline">\(\mathcal{S}_{\text{El}}\)</span> - Subset of <span class="math inline">\(\mathcal{S}\)</span> of electricity storage systems</li>
<li><span class="math inline">\(\mathcal{S}_{\text{H2}}\)</span> - Subset of <span class="math inline">\(\mathcal{S}\)</span> of hydrogen storage systems</li>
<li><span class="math inline">\(\mathcal{W}\)</span> - Set of wind parks indexed by <span class="math inline">\(w \in \{1,2,...,|\mathcal{W}|\}\)</span></li>
<li><span class="math inline">\(\mathcal{V}\)</span> - Set of PV parks indexed by <span class="math inline">\(v \in \{1,2,...,|\mathcal{V}|\}\)</span></li>
<li><span class="math inline">\(\mathcal{X}\)</span> - Set of electrolyzers indexed by <span class="math inline">\(x \in \{1,2,...,|\mathcal{X}|\}\)</span></li>
<li><span class="math inline">\(\Omega\)</span> - Set of scenarios indexed by <span class="math inline">\(\omega \in \{1,2,...,|\Omega|\}\)</span></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>New additions to the sets:</p>
<ol type="1">
<li><span class="math inline">\(\mathcal{S}_{\text{El}}\)</span> and <span class="math inline">\(\mathcal{S}_{\text{H2}}\)</span> to distinguish between electricity and hydrogen storage</li>
<li><span class="math inline">\(\mathcal{X}\)</span> for electrolyzers as a new component type</li>
</ol>
</div>
</div>
</section>
<section id="decision-variables" class="level2">
<h2 class="anchored" data-anchor-id="decision-variables">Decision Variables</h2>
<section id="investment-variables-first-stage" class="level3">
<h3 class="anchored" data-anchor-id="investment-variables-first-stage">Investment Variables (First Stage)</h3>
<ul>
<li><span class="math inline">\(e^{nom}_s\)</span> - Nominal energy capacity of storage <span class="math inline">\(s\)</span> [MWh]</li>
<li><span class="math inline">\(p^{ch,nom}_s\)</span> - Nominal charging power of storage <span class="math inline">\(s\)</span> [MW]</li>
<li><span class="math inline">\(p^{dis,nom}_s\)</span> - Nominal discharging power of storage <span class="math inline">\(s\)</span> [MW]</li>
<li><span class="math inline">\(p^{nom}_w\)</span> - Nominal power of wind park <span class="math inline">\(w\)</span> [MW]</li>
<li><span class="math inline">\(p^{nom}_v\)</span> - Nominal power of PV park <span class="math inline">\(v\)</span> [MW]</li>
<li><span class="math inline">\(p^{nom}_x\)</span> - Nominal power of electrolyzer <span class="math inline">\(x\)</span> [MW]</li>
</ul>
</section>
<section id="operational-variables-second-stage" class="level3">
<h3 class="anchored" data-anchor-id="operational-variables-second-stage">Operational Variables (Second Stage)</h3>
<ul>
<li><span class="math inline">\(p_{w,t,\omega}\)</span> - Power output of wind park <span class="math inline">\(w\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(p_{v,t,\omega}\)</span> - Power output of PV park <span class="math inline">\(v\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(p^{in}_{t,\omega}\)</span> - Power inflow through market at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(p^{out}_{t,\omega}\)</span> - Power outflow through market at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(p^{ch}_{s,t,\omega}\)</span> - Charging power of storage <span class="math inline">\(s\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(p^{dis}_{s,t,\omega}\)</span> - Discharging power of storage <span class="math inline">\(s\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(e_{s,t,\omega}\)</span> - Energy level of storage <span class="math inline">\(s\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MWh]</li>
<li><span class="math inline">\(p_{x,t,\omega}\)</span> - Power consumption of electrolyzer <span class="math inline">\(x\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(h_{x,t,\omega}\)</span> - Hydrogen production of electrolyzer <span class="math inline">\(x\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>New operational variables for the electrolyzer:</p>
<ol type="1">
<li><span class="math inline">\(p_{x,t,\omega}\)</span> for power consumption</li>
<li><span class="math inline">\(h_{x,t,\omega}\)</span> for hydrogen production</li>
</ol>
</div>
</div>
</section>
<section id="annual-cost-variables" class="level3">
<h3 class="anchored" data-anchor-id="annual-cost-variables">Annual Cost Variables</h3>
<ul>
<li><span class="math inline">\(AC^{inv}_s\)</span> - Annual investment cost for storage <span class="math inline">\(s\)</span> [EUR/year]</li>
<li><span class="math inline">\(AC^{inv}_w\)</span> - Annual investment cost for wind park <span class="math inline">\(w\)</span> [EUR/year]</li>
<li><span class="math inline">\(AC^{inv}_v\)</span> - Annual investment cost for PV park <span class="math inline">\(v\)</span> [EUR/year]</li>
<li><span class="math inline">\(AC^{inv}_x\)</span> - Annual investment cost for electrolyzer <span class="math inline">\(x\)</span> [EUR/year]</li>
<li><span class="math inline">\(AC^{grid,imp}_{\omega}\)</span> - Annual grid electricity import cost in scenario <span class="math inline">\(\omega\)</span> [EUR/year]</li>
<li><span class="math inline">\(AR^{grid,exp}_{\omega}\)</span> - Annual grid electricity export revenue in scenario <span class="math inline">\(\omega\)</span> [EUR/year]</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>New cost variable: <span class="math inline">\(AC^{inv}_x\)</span> for electrolyzer investment costs</p>
</div>
</div>
</section>
</section>
<section id="parameters" class="level2">
<h2 class="anchored" data-anchor-id="parameters">Parameters</h2>
<section id="investment-costs-first-stage" class="level3">
<h3 class="anchored" data-anchor-id="investment-costs-first-stage">Investment Costs (First Stage)</h3>
<ul>
<li><span class="math inline">\(C^{E}_s\)</span> - Cost per MWh of energy capacity for storage <span class="math inline">\(s\)</span> [EUR/MWh]</li>
<li><span class="math inline">\(C^{P,ch}_s\)</span> - Cost per MW of charging power capacity for storage <span class="math inline">\(s\)</span> [EUR/MW]</li>
<li><span class="math inline">\(C^{P,dis}_s\)</span> - Cost per MW of discharging power capacity for storage <span class="math inline">\(s\)</span> [EUR/MW]</li>
<li><span class="math inline">\(C^{W}_w\)</span> - Cost per MW of wind park <span class="math inline">\(w\)</span> [EUR/MW]</li>
<li><span class="math inline">\(C^{PV}_v\)</span> - Cost per MW of PV park <span class="math inline">\(v\)</span> [EUR/MW]</li>
<li><span class="math inline">\(C^{X}_x\)</span> - Cost per MW of electrolyzer <span class="math inline">\(x\)</span> [EUR/MW]</li>
<li><span class="math inline">\(F^{PVAF}\)</span> - Present value annuity factor for investment costs</li>
<li><span class="math inline">\(B^{max}\)</span> - Maximum investment budget [EUR]</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>New investment cost parameter: <span class="math inline">\(C^{X}_x\)</span> for electrolyzer capacity costs</p>
</div>
</div>
</section>
<section id="operational-parameters-second-stage" class="level3">
<h3 class="anchored" data-anchor-id="operational-parameters-second-stage">Operational Parameters (Second Stage)</h3>
<ul>
<li><span class="math inline">\(\eta^{ch}_s\)</span> - Charging efficiency of storage <span class="math inline">\(s\)</span></li>
<li><span class="math inline">\(\eta^{dis}_s\)</span> - Discharging efficiency of storage <span class="math inline">\(s\)</span></li>
<li><span class="math inline">\(sdr_s\)</span> - Self-discharge rate of storage <span class="math inline">\(s\)</span> per time step</li>
<li><span class="math inline">\(DoD_s\)</span> - Depth of discharge limit for storage <span class="math inline">\(s\)</span> [%]</li>
<li><span class="math inline">\(f_{w,t,\omega}\)</span> - Wind capacity factor at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> for wind park <span class="math inline">\(w\)</span></li>
<li><span class="math inline">\(f_{v,t,\omega}\)</span> - Solar capacity factor at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> for PV park <span class="math inline">\(v\)</span></li>
<li><span class="math inline">\(d_{t,\omega}\)</span> - Hydrogen demand at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(c^{MP}_{t,\omega}\)</span> - Grid electricity market price at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [EUR/MWh]</li>
<li><span class="math inline">\(c^{TaL}\)</span> - Grid electricity taxes and levies (including Netzentgelt) [EUR/MWh]</li>
<li><span class="math inline">\(\beta_x\)</span> - Conversion factor of electrolyzer <span class="math inline">\(x\)</span> [MW H2/MW El]</li>
<li><span class="math inline">\(\pi_{\omega}\)</span> - Probability of scenario <span class="math inline">\(\omega\)</span></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Changes in operational parameters:</p>
<ol type="1">
<li><span class="math inline">\(d_{t,\omega}\)</span> now represents hydrogen demand instead of electricity demand</li>
<li>New parameter <span class="math inline">\(\beta_x\)</span> for electrolyzer conversion efficiency</li>
</ol>
</div>
</div>
</section>
</section>
<section id="objective-function-1" class="level2">
<h2 class="anchored" data-anchor-id="objective-function-1">Objective Function</h2>
<p><span class="math inline">\(\text{Minimize} \quad \sum_{s \in \mathcal{S}} AC^{inv}_s + \sum_{w \in \mathcal{W}} AC^{inv}_w + \sum_{v \in \mathcal{V}} AC^{inv}_v + \sum_{x \in \mathcal{X}} AC^{inv}_x + \sum_{\omega \in \Omega} \pi_{\omega} (AC^{grid,imp}_{\omega} - AR^{grid,exp}_{\omega})\)</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Changes in objective function: Added electrolyzer investment costs <span class="math inline">\(\sum_{x \in \mathcal{X}} AC^{inv}_x\)</span></p>
</div>
</div>
</section>
<section id="annual-cost-constraints" class="level2">
<h2 class="anchored" data-anchor-id="annual-cost-constraints">Annual Cost Constraints</h2>
<section id="investment-costs-first-stage-1" class="level3">
<h3 class="anchored" data-anchor-id="investment-costs-first-stage-1">Investment Costs (First Stage)</h3>
<p><span class="math inline">\(AC^{inv}_s = \frac{C^{E}_s}{F^{PVAF}} e^{nom}_s + C^{P,ch}_s p^{ch,nom}_s + C^{P,dis}_s p^{dis,nom}_s \quad \forall s \in \mathcal{S}\)</span> <span class="math inline">\(AC^{inv}_w = \frac{C^{W}_w}{F^{PVAF}} p^{nom}_w \quad \forall w \in \mathcal{W}\)</span> <span class="math inline">\(AC^{inv}_v = \frac{C^{PV}_v}{F^{PVAF}} p^{nom}_v \quad \forall v \in \mathcal{V}\)</span> <span class="math inline">\(AC^{inv}_x = \frac{C^{X}_x}{F^{PVAF}} p^{nom}_x \quad \forall x \in \mathcal{X}\)</span></p>
</section>
<section id="investment-budget" class="level3">
<h3 class="anchored" data-anchor-id="investment-budget">Investment Budget</h3>
<p><span class="math inline">\(\sum_{s \in \mathcal{S}} (C^{E}_s e^{nom}_s + C^{P,ch}_s p^{ch,nom}_s + C^{P,dis}_s p^{dis,nom}_s) + \sum_{w \in \mathcal{W}} C^{W}_w p^{nom}_w + \sum_{v \in \mathcal{V}} C^{PV}_v p^{nom}_v + \sum_{x \in \mathcal{X}} C^{X}_x p^{nom}_x \leq B^{max}\)</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Changes in investment budget: Added electrolyzer investment costs <span class="math inline">\(\sum_{x \in \mathcal{X}} C^{X}_x p^{nom}_x\)</span></p>
</div>
</div>
</section>
<section id="grid-electricity-costs-second-stage" class="level3">
<h3 class="anchored" data-anchor-id="grid-electricity-costs-second-stage">Grid Electricity Costs (Second Stage)</h3>
<p><span class="math inline">\(AC^{grid,imp}_{\omega} = \sum_{t \in \mathcal{T}} (c^{MP}_{t,\omega} + c^{TaL}) p^{in}_{t,\omega} \quad \forall \omega \in \Omega\)</span> <span class="math inline">\(AR^{grid,exp}_{\omega} = \sum_{t \in \mathcal{T}} c^{MP}_{t,\omega} p^{out}_{t,\omega} \quad \forall \omega \in \Omega\)</span></p>
</section>
</section>
<section id="constraints" class="level2">
<h2 class="anchored" data-anchor-id="constraints">Constraints</h2>
<section id="power-balance-electricity" class="level3">
<h3 class="anchored" data-anchor-id="power-balance-electricity">Power Balance (Electricity)</h3>
<p><span class="math inline">\(\sum_{w \in \mathcal{W}} p_{w,t,\omega} + \sum_{v \in \mathcal{V}} p_{v,t,\omega} + (p^{in}_{t,\omega} - p^{out}_{t,\omega}) + \sum_{s \in \mathcal{S}_{\text{El}}} (p^{dis}_{s,t,\omega} - p^{ch}_{s,t,\omega}) = \sum_{x \in \mathcal{X}} p_{x,t,\omega} \quad \forall t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Changes in electricity balance:</p>
<ol type="1">
<li>Uses <span class="math inline">\(\mathcal{S}_{\text{El}}\)</span> subset for electricity storage</li>
<li>Right-hand side changed from demand to electrolyzer consumption</li>
</ol>
</div>
</div>
</section>
<section id="hydrogen-balance" class="level3">
<h3 class="anchored" data-anchor-id="hydrogen-balance">Hydrogen Balance</h3>
<p><span class="math inline">\(\sum_{x \in \mathcal{X}} h_{x,t,\omega} + \sum_{s \in \mathcal{S}_{\text{H2}}} (p^{dis}_{s,t,\omega} - p^{ch}_{s,t,\omega}) = d_{t,\omega} \quad \forall t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>New constraint:</p>
<p>Hydrogen balance equation considering:</p>
<ol type="1">
<li>Hydrogen production from electrolyzers</li>
<li>Hydrogen storage operations</li>
<li>Hydrogen demand</li>
</ol>
</div>
</div>
</section>
<section id="component-limits" class="level3">
<h3 class="anchored" data-anchor-id="component-limits">Component Limits</h3>
<section id="wind-parks" class="level4">
<h4 class="anchored" data-anchor-id="wind-parks">Wind Parks</h4>
<p><span class="math inline">\(0 \leq p_{w,t,\omega} \leq f_{w,t,\omega} p^{nom}_w \quad \forall w \in \mathcal{W}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
</section>
<section id="pv-parks" class="level4">
<h4 class="anchored" data-anchor-id="pv-parks">PV Parks</h4>
<p><span class="math inline">\(0 \leq p_{v,t,\omega} \leq f_{v,t,\omega} p^{nom}_v \quad \forall v \in \mathcal{V}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
</section>
<section id="storage-systems" class="level4">
<h4 class="anchored" data-anchor-id="storage-systems">Storage Systems</h4>
<p><span class="math inline">\(0 \leq p^{ch}_{s,t,\omega} \leq p^{ch,nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(0 \leq p^{dis}_{s,t,\omega} \leq p^{dis,nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(DoD_s e^{nom}_s \leq e_{s,t,\omega} \leq e^{nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
</section>
</section>
<section id="storage-energy-balance" class="level3">
<h3 class="anchored" data-anchor-id="storage-energy-balance">Storage Energy Balance</h3>
<p><span class="math inline">\(e_{s,t,\omega} = (1-sdr_s)e_{s,t-1,\omega} + \eta^{ch}_s p^{ch}_{s,t,\omega} - \frac{p^{dis}_{s,t,\omega}}{\eta^{dis}_s} \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
</section>
<section id="electrolyzer-constraints" class="level3">
<h3 class="anchored" data-anchor-id="electrolyzer-constraints">Electrolyzer Constraints</h3>
<p><span class="math inline">\(0 \leq p_{x,t,\omega} \leq p^{nom}_x \quad \forall x \in \mathcal{X}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(h_{x,t,\omega} = \beta_x p_{x,t,\omega} \quad \forall x \in \mathcal{X}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>New constraints for electrolyzer:</p>
<ol type="1">
<li>Power consumption limits</li>
<li>Conversion relationship between power consumption and hydrogen production</li>
</ol>
</div>
</div>
<div class="loud-slide">
<div class="r-fit-text">
<p>Questions?</p>
</div>
</div>
<div class="footer">

</div>
</section>
</section>
</section>
<section id="literature" class="level1 title">
<h1 class="title"><span class="flow">Literature</span></h1>
<section id="literature-i" class="level2">
<h2 class="anchored" data-anchor-id="literature-i">Literature I</h2>
<p>For more interesting literature to learn more about Julia, take a look at the <a href="../general/literature.html">literature list</a> of this course.</p>
</section>
<section id="literature-ii" class="level2">
<h2 class="anchored" data-anchor-id="literature-ii">Literature II</h2>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/TobiasCors\.github\.io\/Energy-System-Optimization");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Energy System Optimization with Julia, Tobias Cors<br>CC BY-NC-SA 4.0</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/TobiasCors/Energy-System-Optimization/edit/main/part-09/lecture-mes.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/TobiasCors/Energy-System-Optimization/blob/main/part-09/lecture-mes.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/TobiasCors/Energy-System-Optimization/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/TobiasCors/Energy-System-Optimization">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/tobias-cors">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>