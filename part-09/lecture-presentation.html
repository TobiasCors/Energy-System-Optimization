<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="Dr.&nbsp;Tobias Cors">
  <title>Energy System Optimization with Julia – Lecture IX - Multi-Energy Systems</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-3c901e439054d7a7a1dc51f2fc5d8a30.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#025259" class="quarto-title-block center">
  <h1 class="title">Lecture IX - Multi-Energy Systems</h1>
  <p class="subtitle">Energy System Optimization with Julia</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Dr.&nbsp;Tobias Cors 
</div>
        <p class="quarto-title-affiliation">
            Hamburg University of Applied Science - Summer 2025
          </p>
    </div>
</div>

</section>
<section>
<section id="quick-recap-from-last-week" class="title-slide slide level1 title center">
<h1><span class="flow">Quick Recap from last Week</span></h1>

</section>
<section id="energy-system-design-problem-overview" class="slide level2">
<h2>Energy System Design Problem Overview</h2>
<ul>
<li><p><strong>Objective</strong>: Minimize total annual costs (investment + operational) while respecting budget constraints</p></li>
<li><p><strong>Decision Variables</strong>:</p>
<ul>
<li>Investment variables (First Stage):
<ul>
<li>Storage energy capacity (<span class="math inline">\(e^{nom}_s\)</span>)</li>
<li>Storage charging power (<span class="math inline">\(p^{ch,nom}_s\)</span>)</li>
<li>Storage discharging power (<span class="math inline">\(p^{dis,nom}_s\)</span>)</li>
<li>Wind park capacity (<span class="math inline">\(p^{nom}_w\)</span>)</li>
<li>PV park capacity (<span class="math inline">\(p^{nom}_v\)</span>)</li>
</ul></li>
<li>Operational variables (Second Stage):
<ul>
<li>Wind power output (<span class="math inline">\(p_{w,t,\omega}\)</span>)</li>
<li>PV power output (<span class="math inline">\(p_{v,t,\omega}\)</span>)</li>
<li>Grid import/export (<span class="math inline">\(p^{in}_{t,\omega}\)</span>, <span class="math inline">\(p^{out}_{t,\omega}\)</span>)</li>
<li>Storage operation (<span class="math inline">\(p^{ch}_{s,t,\omega}\)</span>, <span class="math inline">\(p^{dis}_{s,t,\omega}\)</span>, <span class="math inline">\(e_{s,t,\omega}\)</span>)</li>
</ul></li>
</ul></li>
<li><p><strong>Key Constraints</strong>:</p>
<ul>
<li>Investment budget limit</li>
<li>Power balance</li>
<li>Component capacity limits</li>
<li>Storage energy balance</li>
<li>Storage energy limits</li>
<li>Storage power limits</li>
</ul></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>The Energy System Design problem combines investment planning (sizing) with operational optimization, enabling comprehensive energy system design. The stochastic formulation considers multiple scenarios to account for uncertainty in renewable generation, demand patterns, and price variations.</p>
</div>
</div>
</div>
</section>
<section id="mathematical-formulation" class="slide level2">
<h2>Mathematical Formulation</h2>
<h3 id="objective-function">Objective Function</h3>
<p><span class="math inline">\(\text{Minimize} \quad \sum_{s \in \mathcal{S}} AC^{inv}_s + \sum_{w \in \mathcal{W}} AC^{inv}_w + \sum_{v \in \mathcal{V}} AC^{inv}_v + \sum_{\omega \in \Omega} \pi_{\omega} (AC^{grid,imp}_{\omega} - AR^{grid,exp}_{\omega})\)</span></p>
<h3 id="key-constraints">Key Constraints</h3>
<ol type="1">
<li><strong>Investment Budget</strong>:</li>
</ol>
<p><span class="math inline">\(\sum_{s \in \mathcal{S}} (C^{E}_s e^{nom}_s + C^{P,ch}_s p^{ch,nom}_s + C^{P,dis}_s p^{dis,nom}_s) + \sum_{w \in \mathcal{W}} C^{W}_w p^{nom}_w + \sum_{v \in \mathcal{V}} C^{PV}_v p^{nom}_v \leq B^{max}\)</span></p>
<ol start="2" type="1">
<li><strong>Power Balance</strong>:</li>
</ol>
<p><span class="math inline">\(\sum_{w \in \mathcal{W}} p_{w,t,\omega} + \sum_{v \in \mathcal{V}} p_{v,t,\omega} + (p^{in}_{t,\omega} - p^{out}_{t,\omega}) + \sum_{s \in \mathcal{S}} (p^{dis}_{s,t,\omega} - p^{ch}_{s,t,\omega}) = d_{t,\omega} \quad \forall t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<ol start="3" type="1">
<li><strong>Component Capacity Limits</strong>:</li>
</ol>
<p><span class="math inline">\(0 \leq p_{w,t,\omega} \leq f_{w,t,\omega} p^{nom}_w \quad \forall w \in \mathcal{W}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(0 \leq p_{v,t,\omega} \leq f_{v,t,\omega} p^{nom}_v \quad \forall v \in \mathcal{V}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(0 \leq p^{ch}_{s,t,\omega} \leq p^{ch,nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(0 \leq p^{dis}_{s,t,\omega} \leq p^{dis,nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(DoD_s e^{nom}_s \leq e_{s,t,\omega} \leq e^{nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<ol start="4" type="1">
<li><strong>Storage Energy Balance</strong>:</li>
</ol>
<p><span class="math inline">\(e_{s,t,\omega} = (1-sdr_s)e_{s,t-1,\omega} + \eta^{ch}_s p^{ch}_{s,t,\omega} - \frac{p^{dis}_{s,t,\omega}}{\eta^{dis}_s} \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
</section>
<section id="model-characteristics" class="slide level2">
<h2>Model Characteristics</h2>
<ul>
<li>Two-stage stochastic Linear Programming (LP) problem</li>
<li>Combines investment and operational decisions</li>
<li>Large-scale optimization problem</li>
<li>Requires efficient solution methods</li>
<li>Considers multiple scenarios for robust decision-making</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>The model can be adapted to specific use cases, i.e., if a wind park already has a fixed capacity, the corresponding variable can be converted to a parameter. The stochastic formulation allows for more robust investment decisions by considering multiple scenarios.</p>
</div>
</div>
</div>
</section>
<section id="additional-constraints" class="slide level2">
<h2>Additional Constraints</h2>
<p>The basic model can be extended with various constraints, partly covered from previous lectures:</p>
<h3 id="generator-constraints">Generator Constraints</h3>
<ul>
<li>Minimum up/down times</li>
<li>Start-up and shut-down costs</li>
<li>Ramp rate limits</li>
<li>Minimum load constraints</li>
<li>Part-load efficiency curves</li>
</ul>
<h3 id="storage-constraints">Storage Constraints</h3>
<ul>
<li>Ramp rate limits for charging/discharging</li>
<li>Mutual exclusion constraints</li>
<li>Cycle limits (daily/weekly/seasonal)</li>
<li>State of charge dependent efficiency</li>
<li>Temperature dependent operation</li>
<li>Degradation effects</li>
<li>Multiple storage technologies with different characteristics</li>
</ul>
<h3 id="grid-connection">Grid Connection</h3>
<ul>
<li>Maximum import/export power limits</li>
<li>Grid fees and tariffs</li>
<li>Ancillary service requirements</li>
</ul>
<h3 id="renewable-generation">Renewable Generation</h3>
<ul>
<li>Curtailment limits</li>
</ul>
<h3 id="system-wide-constraints">System-wide Constraints</h3>
<ul>
<li>Reserve requirements</li>
<li>Island operation capability</li>
<li>Multiple energy carriers</li>
<li>Environmental constraints</li>
<li>Regulatory requirements</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>These additional constraints can be included based on the specific requirements of the energy system being designed. Each constraint adds complexity but may be necessary for realistic modeling.</p>
</div>
</div>
</div>
</section>
<section id="implementation-insights" class="slide level2">
<h2>Implementation Insights</h2>
<ul>
<li>Data structures use NamedTuples for efficient parameter storage</li>
<li>Results are stored in DataFrames for easy analysis</li>
<li>Key metrics tracked:
<ul>
<li>Total system cost</li>
<li>Investment costs by component</li>
<li>Operational costs</li>
<li>Component capacities</li>
<li>Storage operation</li>
<li>Grid interaction</li>
</ul></li>
<li>Sensitivity analysis capabilities:
<ul>
<li>Budget variations</li>
<li>Electricity price changes</li>
<li>Component cost variations</li>
</ul></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>The tutorial demonstrated how to implement and solve the stochastic design problem using Julia and JuMP, including comprehensive sensitivity analysis of key parameters such as investment budget and electricity prices.</p>
</div>
</div>
</div>
</section>
<section id="solutions-from-last-week" class="slide level2">
<h2>Solutions from last Week</h2>
<ul>
<li>The tutorials from last week will again be <span class="highlight">available on Friday</span></li>
<li>You can access them in the project folder on Github</li>
<li>Click on the little cat icon on the bottom right</li>
</ul>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p><span class="highlight">You can ask questions anytime in class or via email!</span></p>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="excursion-two-stage-stochastic-programming" class="title-slide slide level1 title center">
<h1><span class="flow">Excursion: Two-Stage Stochastic Programming</span></h1>

</section>
<section id="problem-structure-vs.-solution-method" class="slide level2">
<h2>Problem Structure vs.&nbsp;Solution Method</h2>
<p>A two-stage stochastic programming problem is characterized by its decision structure, not its solution method. The key aspects are:</p>
<ol type="1">
<li><strong>Decision Stages</strong>:
<ul>
<li>First stage (here-and-now): Decisions made before uncertainty is revealed</li>
<li>Second stage (wait-and-see): Decisions made after uncertainty is revealed</li>
</ul></li>
<li><strong>Information Structure</strong>:
<ul>
<li>First stage: Decisions based on known parameters and probability distributions</li>
<li>Second stage: Decisions based on observed scenario realizations</li>
</ul></li>
</ol>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>The “two-stage” classification refers to the logical structure and timing of decisions, not how the problem is solved computationally.</p>
</div>
</div>
</div>
</section>
<section id="solution-approaches" class="slide level2">
<h2>Solution Approaches</h2>
<h3 id="monolithic-approach">Monolithic Approach</h3>
<ul>
<li>Solve the entire problem as one large optimization model</li>
<li>All constraints and variables are included in a single mathematical program</li>
<li>Advantages:
<ul>
<li>Simpler implementation</li>
<li>Direct solution using standard solvers</li>
<li>No need for specialized algorithms</li>
</ul></li>
<li>Disadvantages:
<ul>
<li>Can become computationally challenging for large problems</li>
<li>May require significant memory resources</li>
</ul></li>
</ul>
<h3 id="decomposition-methods">Decomposition Methods</h3>
<ul>
<li>Break the problem into smaller subproblems</li>
<li>Examples:
<ul>
<li>Benders decomposition: Iteratively solves a master problem (first stage) and subproblems (second stage) by adding cuts that approximate the second-stage cost</li>
<li>Progressive hedging: Solves each scenario independently and iteratively adjusts solutions to achieve consensus across scenarios</li>
<li>L-shaped method: Similar to Benders, but specifically designed for two-stage stochastic linear programs with a special structure</li>
</ul></li>
<li>Advantages:
<ul>
<li>Can handle larger problems</li>
<li>More efficient for certain problem structures</li>
</ul></li>
<li>Disadvantages:
<ul>
<li>More complex implementation</li>
<li>May require specialized algorithms</li>
</ul></li>
</ul>
</section>
<section id="energy-system-design-example" class="slide level2">
<h2>Energy System Design Example</h2>
<p>In our energy system design problem:</p>
<h3 id="first-stage-investment">First Stage (Investment)</h3>
<ul>
<li>Storage capacity decisions</li>
<li>Wind park capacity</li>
<li>PV park capacity</li>
<li>Made before knowing:
<ul>
<li>Renewable generation profiles</li>
<li>Demand patterns</li>
<li>Electricity prices</li>
</ul></li>
</ul>
<h3 id="second-stage-operation">Second Stage (Operation)</h3>
<ul>
<li>Power dispatch decisions</li>
<li>Storage operation</li>
<li>Grid interaction</li>
<li>Made after observing:
<ul>
<li>Actual renewable generation</li>
<li>Real demand</li>
<li>Current market prices</li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Whether we solve this as one large optimization problem or use decomposition methods, it remains a two-stage stochastic program due to its decision structure and information flow.</p>
</div>
</div>
</div>
</section>
<section id="mathematical-representation" class="slide level2">
<h2>Mathematical Representation</h2>
<p>The general form of a two-stage stochastic program is:</p>
<p><span class="math inline">\(\min_{x} \quad c^T x + \mathbb{E}_{\omega}[Q(x,\omega)]\)</span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\(x\)</span> represents first-stage decisions</li>
<li><span class="math inline">\(Q(x,\omega)\)</span> represents the second-stage problem for scenario <span class="math inline">\(\omega\)</span></li>
<li><span class="math inline">\(\mathbb{E}_{\omega}\)</span> denotes the expectation over all scenarios</li>
</ul>
<p>This structure can be solved:</p>
<ol type="1">
<li>As one large optimization problem (monolithic)</li>
<li>Using decomposition methods</li>
<li>Through other specialized algorithms</li>
</ol>
<p>The choice of solution method depends on:</p>
<ul>
<li>Problem size</li>
<li>Available computational resources</li>
<li>Required solution time</li>
<li>Implementation complexity</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>The two-stage structure provides a framework for modeling decision-making under uncertainty, regardless of the computational approach used to solve it.</p>
</div>
</div>
</div>
</section></section>
<section>
<section id="introduction-to-multi-energy-systems" class="title-slide slide level1 title center">
<h1><span class="flow">Introduction to Multi-Energy Systems</span></h1>

</section>
<section id="multi-energy-systems-definition" class="slide level2">
<h2>Multi-Energy Systems: Definition</h2>
<p>A multi-energy system is a system that combines multiple energy carriers (e.g.&nbsp;electricity, hydrogen, heat, etc.) to meet the energy demand of a specific application.</p>
</section>
<section id="multi-energy-systems-example-hydrogen-value-chain" class="slide level2">
<h2>Multi-Energy Systems: Example Hydrogen Value Chain</h2>

<img data-src="H2-mes.png" style="width:70.0%" class="r-stretch quarto-figure-center"><p class="caption">Example case of a hydrogen value chain</p><div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>The figure shows a multi-energy system with:</p>
<ul>
<li>Renewable energy sources (PV and Wind) and grid connection</li>
<li>Electric bus bar for power distribution</li>
<li>Electrolyzer for hydrogen production</li>
<li>Hydrogen bus bar for hydrogen distribution</li>
<li>Hydrogen storage</li>
<li>Hydrogen demand</li>
</ul>
</div>
</div>
</div>
</section>
<section id="multi-energy-system-design-problem" class="slide level2">
<h2>Multi-Energy System Design Problem</h2>
<p>In this lecture, we extend the Stochastic System Design problem to include investment decisions for <em>multi-energy systems</em>. This allows us to:</p>
<ol type="1">
<li>Optimize technology selection over the entire energy value chain</li>
<li>Determine optimal component sizes</li>
<li>Balance investment and operational costs</li>
<li>Plan local multi-energy systems holistically (e.g.&nbsp;electricity, hydrogen, heat, etc.)</li>
</ol>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Remember: The design problem combines investment planning (sizing) with operational optimization, enabling comprehensive (multi-)energy system design.</p>
</div>
</div>
</div>
</section>
<section id="key-components" class="slide level2">
<h2>Key Components</h2>
<p>We will focus on optimizing:</p>
<ul>
<li>Storage systems for electricity and hydrogen</li>
<li>Wind parks</li>
<li>PV parks</li>
<li>Electrolyzers</li>
<li>Electric market participation</li>
</ul>
<p>… while fullfilling a fixed hydrogen demand. Additionally, we consider a maximum investment budget.</p>
<p>All nominal sizes will be decision variables in our optimization model.</p>
</section></section>
<section>
<section id="mathematical-formulation-of-the-stochastic-design-problem-for-multi-energy-systems" class="title-slide slide level1 title center">
<h1><span class="flow">Mathematical Formulation of the Stochastic Design Problem for Multi-Energy Systems</span></h1>
<p><strong>… on the simple example of the hydrogen value chain with electricity and hydrogen as mediums</strong></p>
</section>
<section id="sets" class="slide level2">
<h2>Sets</h2>
<ul>
<li><span class="math inline">\(\mathcal{T}\)</span> - Set of time periods indexed by <span class="math inline">\(t \in \{1,2,...,|\mathcal{T}|\}\)</span></li>
<li><span class="math inline">\(\mathcal{S}\)</span> - Set of storage systems indexed by <span class="math inline">\(s \in \{1,2,...,|\mathcal{S}|\}\)</span></li>
<li><span class="math inline">\(\mathcal{S}_{\text{El}}\)</span> - Subset of <span class="math inline">\(\mathcal{S}\)</span> of electricity storage systems</li>
<li><span class="math inline">\(\mathcal{S}_{\text{H2}}\)</span> - Subset of <span class="math inline">\(\mathcal{S}\)</span> of hydrogen storage systems</li>
<li><span class="math inline">\(\mathcal{W}\)</span> - Set of wind parks indexed by <span class="math inline">\(w \in \{1,2,...,|\mathcal{W}|\}\)</span></li>
<li><span class="math inline">\(\mathcal{V}\)</span> - Set of PV parks indexed by <span class="math inline">\(v \in \{1,2,...,|\mathcal{V}|\}\)</span></li>
<li><span class="math inline">\(\mathcal{X}\)</span> - Set of electrolyzers indexed by <span class="math inline">\(x \in \{1,2,...,|\mathcal{X}|\}\)</span></li>
<li><span class="math inline">\(\Omega\)</span> - Set of scenarios indexed by <span class="math inline">\(\omega \in \{1,2,...,|\Omega|\}\)</span></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>New additions to the sets:</p>
<ol type="1">
<li><span class="math inline">\(\mathcal{S}_{\text{El}}\)</span> and <span class="math inline">\(\mathcal{S}_{\text{H2}}\)</span> to distinguish between electricity and hydrogen storage</li>
<li><span class="math inline">\(\mathcal{X}\)</span> for electrolyzers as a new component type</li>
</ol>
</div>
</div>
</div>
</section>
<section id="decision-variables" class="slide level2">
<h2>Decision Variables</h2>
<h3 id="investment-variables-first-stage">Investment Variables (First Stage)</h3>
<ul>
<li><span class="math inline">\(e^{nom}_s\)</span> - Nominal energy capacity of storage <span class="math inline">\(s\)</span> [MWh]</li>
<li><span class="math inline">\(p^{ch,nom}_s\)</span> - Nominal charging power of storage <span class="math inline">\(s\)</span> [MW]</li>
<li><span class="math inline">\(p^{dis,nom}_s\)</span> - Nominal discharging power of storage <span class="math inline">\(s\)</span> [MW]</li>
<li><span class="math inline">\(p^{nom}_w\)</span> - Nominal power of wind park <span class="math inline">\(w\)</span> [MW]</li>
<li><span class="math inline">\(p^{nom}_v\)</span> - Nominal power of PV park <span class="math inline">\(v\)</span> [MW]</li>
<li><span class="math inline">\(p^{nom}_x\)</span> - Nominal power of electrolyzer <span class="math inline">\(x\)</span> [MW]</li>
</ul>
<h3 id="operational-variables-second-stage">Operational Variables (Second Stage)</h3>
<ul>
<li><span class="math inline">\(p_{w,t,\omega}\)</span> - Power output of wind park <span class="math inline">\(w\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(p_{v,t,\omega}\)</span> - Power output of PV park <span class="math inline">\(v\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(p^{in}_{t,\omega}\)</span> - Power inflow through market at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(p^{out}_{t,\omega}\)</span> - Power outflow through market at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(p^{ch}_{s,t,\omega}\)</span> - Charging power of storage <span class="math inline">\(s\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(p^{dis}_{s,t,\omega}\)</span> - Discharging power of storage <span class="math inline">\(s\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(e_{s,t,\omega}\)</span> - Energy level of storage <span class="math inline">\(s\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MWh]</li>
<li><span class="math inline">\(p_{x,t,\omega}\)</span> - Power consumption of electrolyzer <span class="math inline">\(x\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(h_{x,t,\omega}\)</span> - Hydrogen production of electrolyzer <span class="math inline">\(x\)</span> at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>New operational variables for the electrolyzer:</p>
<ol type="1">
<li><span class="math inline">\(p_{x,t,\omega}\)</span> for power consumption</li>
<li><span class="math inline">\(h_{x,t,\omega}\)</span> for hydrogen production</li>
</ol>
</div>
</div>
</div>
<h3 id="annual-cost-variables">Annual Cost Variables</h3>
<ul>
<li><span class="math inline">\(AC^{inv}_s\)</span> - Annual investment cost for storage <span class="math inline">\(s\)</span> [EUR/year]</li>
<li><span class="math inline">\(AC^{inv}_w\)</span> - Annual investment cost for wind park <span class="math inline">\(w\)</span> [EUR/year]</li>
<li><span class="math inline">\(AC^{inv}_v\)</span> - Annual investment cost for PV park <span class="math inline">\(v\)</span> [EUR/year]</li>
<li><span class="math inline">\(AC^{inv}_x\)</span> - Annual investment cost for electrolyzer <span class="math inline">\(x\)</span> [EUR/year]</li>
<li><span class="math inline">\(AC^{grid,imp}_{\omega}\)</span> - Annual grid electricity import cost in scenario <span class="math inline">\(\omega\)</span> [EUR/year]</li>
<li><span class="math inline">\(AR^{grid,exp}_{\omega}\)</span> - Annual grid electricity export revenue in scenario <span class="math inline">\(\omega\)</span> [EUR/year]</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>New cost variable: <span class="math inline">\(AC^{inv}_x\)</span> for electrolyzer investment costs</p>
</div>
</div>
</div>
</section>
<section id="parameters" class="slide level2">
<h2>Parameters</h2>
<h3 id="investment-costs-first-stage">Investment Costs (First Stage)</h3>
<ul>
<li><span class="math inline">\(C^{E}_s\)</span> - Cost per MWh of energy capacity for storage <span class="math inline">\(s\)</span> [EUR/MWh]</li>
<li><span class="math inline">\(C^{P,ch}_s\)</span> - Cost per MW of charging power capacity for storage <span class="math inline">\(s\)</span> [EUR/MW]</li>
<li><span class="math inline">\(C^{P,dis}_s\)</span> - Cost per MW of discharging power capacity for storage <span class="math inline">\(s\)</span> [EUR/MW]</li>
<li><span class="math inline">\(C^{W}_w\)</span> - Cost per MW of wind park <span class="math inline">\(w\)</span> [EUR/MW]</li>
<li><span class="math inline">\(C^{PV}_v\)</span> - Cost per MW of PV park <span class="math inline">\(v\)</span> [EUR/MW]</li>
<li><span class="math inline">\(C^{X}_x\)</span> - Cost per MW of electrolyzer <span class="math inline">\(x\)</span> [EUR/MW]</li>
<li><span class="math inline">\(F^{PVAF}\)</span> - Present value annuity factor for investment costs</li>
<li><span class="math inline">\(B^{max}\)</span> - Maximum investment budget [EUR]</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>New investment cost parameter: <span class="math inline">\(C^{X}_x\)</span> for electrolyzer capacity costs</p>
</div>
</div>
</div>
<h3 id="operational-parameters-second-stage">Operational Parameters (Second Stage)</h3>
<ul>
<li><span class="math inline">\(\eta^{ch}_s\)</span> - Charging efficiency of storage <span class="math inline">\(s\)</span></li>
<li><span class="math inline">\(\eta^{dis}_s\)</span> - Discharging efficiency of storage <span class="math inline">\(s\)</span></li>
<li><span class="math inline">\(sdr_s\)</span> - Self-discharge rate of storage <span class="math inline">\(s\)</span> per time step</li>
<li><span class="math inline">\(DoD_s\)</span> - Depth of discharge limit for storage <span class="math inline">\(s\)</span> [%]</li>
<li><span class="math inline">\(f_{w,t,\omega}\)</span> - Wind capacity factor at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> for wind park <span class="math inline">\(w\)</span></li>
<li><span class="math inline">\(f_{v,t,\omega}\)</span> - Solar capacity factor at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> for PV park <span class="math inline">\(v\)</span></li>
<li><span class="math inline">\(d_{t,\omega}\)</span> - Hydrogen demand at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [MW]</li>
<li><span class="math inline">\(c^{MP}_{t,\omega}\)</span> - Grid electricity market price at time <span class="math inline">\(t\)</span> in scenario <span class="math inline">\(\omega\)</span> [EUR/MWh]</li>
<li><span class="math inline">\(c^{TaL}\)</span> - Grid electricity taxes and levies (including Netzentgelt) [EUR/MWh]</li>
<li><span class="math inline">\(\beta_x\)</span> - Conversion factor of electrolyzer <span class="math inline">\(x\)</span> [MW H2/MW El]</li>
<li><span class="math inline">\(\pi_{\omega}\)</span> - Probability of scenario <span class="math inline">\(\omega\)</span></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Changes in operational parameters:</p>
<ol type="1">
<li><span class="math inline">\(d_{t,\omega}\)</span> now represents hydrogen demand instead of electricity demand</li>
<li>New parameter <span class="math inline">\(\beta_x\)</span> for electrolyzer conversion efficiency</li>
</ol>
</div>
</div>
</div>
</section>
<section id="objective-function-1" class="slide level2">
<h2>Objective Function</h2>
<p><span class="math inline">\(\text{Minimize} \quad \sum_{s \in \mathcal{S}} AC^{inv}_s + \sum_{w \in \mathcal{W}} AC^{inv}_w + \sum_{v \in \mathcal{V}} AC^{inv}_v + \sum_{x \in \mathcal{X}} AC^{inv}_x + \sum_{\omega \in \Omega} \pi_{\omega} (AC^{grid,imp}_{\omega} - AR^{grid,exp}_{\omega})\)</span></p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Changes in objective function: Added electrolyzer investment costs <span class="math inline">\(\sum_{x \in \mathcal{X}} AC^{inv}_x\)</span></p>
</div>
</div>
</div>
</section>
<section id="annual-cost-constraints" class="slide level2">
<h2>Annual Cost Constraints</h2>
<h3 id="investment-costs-first-stage-1">Investment Costs (First Stage)</h3>
<p><span class="math inline">\(AC^{inv}_s = \frac{C^{E}_s}{F^{PVAF}} e^{nom}_s + C^{P,ch}_s p^{ch,nom}_s + C^{P,dis}_s p^{dis,nom}_s \quad \forall s \in \mathcal{S}\)</span> <span class="math inline">\(AC^{inv}_w = \frac{C^{W}_w}{F^{PVAF}} p^{nom}_w \quad \forall w \in \mathcal{W}\)</span> <span class="math inline">\(AC^{inv}_v = \frac{C^{PV}_v}{F^{PVAF}} p^{nom}_v \quad \forall v \in \mathcal{V}\)</span> <span class="math inline">\(AC^{inv}_x = \frac{C^{X}_x}{F^{PVAF}} p^{nom}_x \quad \forall x \in \mathcal{X}\)</span></p>
<h3 id="investment-budget">Investment Budget</h3>
<p><span class="math inline">\(\sum_{s \in \mathcal{S}} (C^{E}_s e^{nom}_s + C^{P,ch}_s p^{ch,nom}_s + C^{P,dis}_s p^{dis,nom}_s) + \sum_{w \in \mathcal{W}} C^{W}_w p^{nom}_w + \sum_{v \in \mathcal{V}} C^{PV}_v p^{nom}_v + \sum_{x \in \mathcal{X}} C^{X}_x p^{nom}_x \leq B^{max}\)</span></p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Changes in investment budget: Added electrolyzer investment costs <span class="math inline">\(\sum_{x \in \mathcal{X}} C^{X}_x p^{nom}_x\)</span></p>
</div>
</div>
</div>
<h3 id="grid-electricity-costs-second-stage">Grid Electricity Costs (Second Stage)</h3>
<p><span class="math inline">\(AC^{grid,imp}_{\omega} = \sum_{t \in \mathcal{T}} (c^{MP}_{t,\omega} + c^{TaL}) p^{in}_{t,\omega} \quad \forall \omega \in \Omega\)</span> <span class="math inline">\(AR^{grid,exp}_{\omega} = \sum_{t \in \mathcal{T}} c^{MP}_{t,\omega} p^{out}_{t,\omega} \quad \forall \omega \in \Omega\)</span></p>
</section>
<section id="constraints" class="slide level2">
<h2>Constraints</h2>
<h3 id="power-balance-electricity">Power Balance (Electricity)</h3>
<p><span class="math inline">\(\sum_{w \in \mathcal{W}} p_{w,t,\omega} + \sum_{v \in \mathcal{V}} p_{v,t,\omega} + (p^{in}_{t,\omega} - p^{out}_{t,\omega}) + \sum_{s \in \mathcal{S}_{\text{El}}} (p^{dis}_{s,t,\omega} - p^{ch}_{s,t,\omega}) = \sum_{x \in \mathcal{X}} p_{x,t,\omega} \quad \forall t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Changes in electricity balance:</p>
<ol type="1">
<li>Uses <span class="math inline">\(\mathcal{S}_{\text{El}}\)</span> subset for electricity storage</li>
<li>Right-hand side changed from demand to electrolyzer consumption</li>
</ol>
</div>
</div>
</div>
<h3 id="hydrogen-balance">Hydrogen Balance</h3>
<p><span class="math inline">\(\sum_{x \in \mathcal{X}} h_{x,t,\omega} + \sum_{s \in \mathcal{S}_{\text{H2}}} (p^{dis}_{s,t,\omega} - p^{ch}_{s,t,\omega}) = d_{t,\omega} \quad \forall t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>New constraint:</p>
<p>Hydrogen balance equation considering:</p>
<ol type="1">
<li>Hydrogen production from electrolyzers</li>
<li>Hydrogen storage operations</li>
<li>Hydrogen demand</li>
</ol>
</div>
</div>
</div>
<h3 id="component-limits">Component Limits</h3>
<h4 id="wind-parks">Wind Parks</h4>
<p><span class="math inline">\(0 \leq p_{w,t,\omega} \leq f_{w,t,\omega} p^{nom}_w \quad \forall w \in \mathcal{W}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<h4 id="pv-parks">PV Parks</h4>
<p><span class="math inline">\(0 \leq p_{v,t,\omega} \leq f_{v,t,\omega} p^{nom}_v \quad \forall v \in \mathcal{V}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<h4 id="storage-systems">Storage Systems</h4>
<p><span class="math inline">\(0 \leq p^{ch}_{s,t,\omega} \leq p^{ch,nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(0 \leq p^{dis}_{s,t,\omega} \leq p^{dis,nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(DoD_s e^{nom}_s \leq e_{s,t,\omega} \leq e^{nom}_s \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<h3 id="storage-energy-balance">Storage Energy Balance</h3>
<p><span class="math inline">\(e_{s,t,\omega} = (1-sdr_s)e_{s,t-1,\omega} + \eta^{ch}_s p^{ch}_{s,t,\omega} - \frac{p^{dis}_{s,t,\omega}}{\eta^{dis}_s} \quad \forall s \in \mathcal{S}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<h3 id="electrolyzer-constraints">Electrolyzer Constraints</h3>
<p><span class="math inline">\(0 \leq p_{x,t,\omega} \leq p^{nom}_x \quad \forall x \in \mathcal{X}, t \in \mathcal{T}, \omega \in \Omega\)</span> <span class="math inline">\(h_{x,t,\omega} = \beta_x p_{x,t,\omega} \quad \forall x \in \mathcal{X}, t \in \mathcal{T}, \omega \in \Omega\)</span></p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>New constraints for electrolyzer:</p>
<ol type="1">
<li>Power consumption limits</li>
<li>Conversion relationship between power consumption and hydrogen production</li>
</ol>
</div>
</div>
</div>
<div class="loud-slide">
<div class="r-fit-text">
<p>Questions?</p>
</div>
</div>
<div class="footer">

</div>
</section></section>
<section>
<section id="literature" class="title-slide slide level1 title center">
<h1><span class="flow">Literature</span></h1>

</section>
<section id="literature-i" class="slide level2">
<h2>Literature I</h2>
<p>For more interesting literature to learn more about Julia, take a look at the <a href="../general/literature.html">literature list</a> of this course.</p>
</section>
<section id="literature-ii" class="slide level2">
<h2>Literature II</h2>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>Lecture IX - Multi-Energy Systems | Dr.&nbsp;Tobias Cors | <a href="../part-09/lecture-mes.html">Home</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'fast',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/TobiasCors\.github\.io\/Energy-System-Optimization");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>